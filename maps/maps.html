<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maps</title>
    <link rel="stylesheet" href="maps.css">
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1>Explore the Maps</h1>
            <p class="subtitle">Discover the diverse environments and challenges of the game's maps.</p>
        </header>

        <div class="maps-grid">
            <div class="map-card">
                <span class="game-mode">King of the Hill</span>
                <h2>Sierra</h2>
                <p class="map-description">
                    Sierra is the first map ever released for Venge. Inspired by ancient Egyptian sandstone settlements, it features yellow textures and red stripes on the building blocks. It has two main areas to fight, with sub routes connecting them. One main area is the **center square**, surrounded by three strategic terraces. The other main playable area is **Market Square**, connected to the center square by two routes that can become heavily conflicted.
                </p>
                <div class="map-tray">
                    <div class="image-grid">
                        <img src="mod-pictures/mappage-pictures/sierra/1.png" alt="Sierra Map Image 1">
                        <img src="mod-pictures/mappage-pictures/sierra/2.png" alt="Sierra Map Image 2">
                        <img src="mod-pictures/mappage-pictures/sierra/3.png" alt="Sierra Map Image 3">
                        <img src="mod-pictures/mappage-pictures/sierra/4.png" alt="Sierra Map Image 4">
                    </div>
                </div>
            </div>

            <div class="map-card">
                <span class="game-mode">Gun Game</span>
                <h2>Tundra</h2>
                <p class="map-description">
                    Tundra is an icy and cold map, covered in endlessly falling snow. It has three main squares and a cave system for navigation. Conflicts usually occur on the terraces, as they stand between the main playable areas. **Docks** is one of the main areas, connecting to the **Cave System**, **The Hall of Fame building**, and up towards the Market Square.
                </p>
                <div class="map-tray">
                    <div class="image-grid">
                        <img src="mod-pictures/mappage-pictures/tundra/1.png" alt="Tundra Map Image 1">
                        <img src="mod-pictures/mappage-pictures/tundra/2.png" alt="Tundra Map Image 2">
                        <img src="mod-pictures/mappage-pictures/tundra/3.png" alt="Tundra Map Image 3">
                        <img src="mod-pictures/mappage-pictures/tundra/4.png" alt="Tundra Map Image 4">
                    </div>
                </div>
            </div>

            <div class="map-card">
                <span class="game-mode">Payload</span>
                <h2>Mistle</h2>
                <p class="map-description">
                    Mistle is a team-based objective map with each team having a spawn area on opposing corners. There's a wide-open area between two fort-like structures where the payload wagon spawns. A narrow river divides the map into two parts in the center. **Snake Temple**, a divine temple complex, is the spawn area for Team A, connecting to the main area via a tunnel and sloped side path. **Fort** is the spawn area for Team B, opening to the main area through a building passage and featuring side balconies for defense.
                </p>
                <div class="map-tray">
                    </div>
            </div>

            <div class="map-card">
                <span class="game-mode">Black Coin</span>
                <h2>Temple</h2>
                <p class="map-description">
                    Temple is the domain of a dark god, designed to collect cursed coins. Players collect cursed coins from fallen players and deliver them to the altar where the dark god resides. The map has three main corridors extending from the main altar area; one leads to the top of the altar temple, while the others lead to the front and side of the map.
                </p>
                <div class="map-tray">
                    </div>
            </div>

            <div class="map-card">
                <span class="game-mode">Deathmatch</span>
                <h2>Sandstorm Blitz</h2>
                <p class="map-description">
                    Sandstorm Blitz is Venge's first weapon-specific map, set in a deserted canyon where only the sniper weapon is playable. It features several tall hills accessible via jumping pods and gliders. Hills have gliding points, allowing players to fly with a glider, which can levitate longer with a dust devil altitude boost.
                </p>
                <div class="map-tray">
                    </div>
            </div>

            <div class="map-card">
                <span class="game-mode">Black Coin</span>
                <h2>Xibalba</h2>
                <p class="map-description">
                    Xibalba was the sacrificial grounds of an ancient civilization. It was temporarily removed due to critical bugs but was republished in October 2023 after OnRush developers fixed them. Its center connects two parts of the map and features several tall buildings, terraces, and back alleys.
                </p>
                <div class="map-tray">
                    <div class="image-grid">
                        <img src="mod-pictures/mappage-pictures/xibalba/1.png" alt="Xibalba Map Image 1">
                        <img src="mod-pictures/mappage-pictures/xibalba/2.png" alt="Xibalba Map Image 2">
                        <img src="mod-pictures/mappage-pictures/xibalba/3.png" alt="Xibalba Map Image 3">
                        <img src="mod-pictures/mappage-pictures/xibalba/4.png" alt="Xibalba Map Image 4">
                    </div>
                </div>
            </div>
        </div>

        <a href="../index.html" class="back-button">Back to Home</a>

    </div>

    <div class="fullscreen-modal">
        <img src="" alt="Fullscreen Map Image">
        <span class="close-button">&times;</span>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mapCards = document.querySelectorAll('.map-card');
            const fullscreenModal = document.querySelector('.fullscreen-modal');
            const modalImage = document.querySelector('.fullscreen-modal img');
            const closeModal = document.querySelector('.close-button');

            mapCards.forEach(card => {
                const mapTray = card.querySelector('.map-tray');

                // Toggle the clicked card's expansion
                card.addEventListener('click', () => {
                    const isExpanded = card.classList.contains('expanded');

                    // Close all other expanded cards
                    mapCards.forEach(otherCard => {
                        if (otherCard !== card && otherCard.classList.contains('expanded')) {
                            otherCard.classList.remove('expanded');
                            otherCard.querySelector('.map-tray').style.maxHeight = '0';
                            otherCard.querySelector('.map-tray').classList.remove('show-images'); // Hide images immediately
                        }
                    });

                    if (isExpanded) {
                        card.classList.remove('expanded');
                        mapTray.style.maxHeight = '0'; // Collapse the tray
                        mapTray.classList.remove('show-images'); // Hide images immediately
                    } else {
                        card.classList.add('expanded');
                        // Set a max-height that is large enough to contain all images and text for smooth transition
                        // Use scrollHeight + a buffer to ensure content fits
                        mapTray.style.maxHeight = mapTray.scrollHeight + 50 + 'px';
                        mapTray.classList.add('show-images'); // Show images after a short delay
                    }
                });

                // Add hover effect (partial expansion)
                card.addEventListener('mouseenter', () => {
                    // Only apply partial expansion on hover if not already fully expanded
                    if (!card.classList.contains('expanded')) {
                        mapTray.style.maxHeight = '80px'; // Adjusted for partial expansion height to show image tops
                    }
                });

                card.addEventListener('mouseleave', () => {
                    // Collapse partial expansion only if not fully expanded and mouse leaves the card
                    if (!card.classList.contains('expanded')) {
                        mapTray.style.maxHeight = '0'; // Collapse back on mouse leave
                    }
                });


                // Add event listeners to images within trays
                const images = mapTray.querySelectorAll('.image-grid img');
                images.forEach(image => {
                    image.addEventListener('click', (event) => {
                        event.stopPropagation(); // Prevent the map card click from toggling the tray
                        modalImage.src = event.target.src;
                        fullscreenModal.style.display = 'flex'; // Use flex to center
                    });
                });
            });

            // Close modal when clicking the close button
            closeModal.addEventListener('click', () => {
                fullscreenModal.style.display = 'none';
            });

            // Close modal when clicking outside the image
            fullscreenModal.addEventListener('click', (event) => {
                if (event.target === fullscreenModal) {
                    fullscreenModal.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>